<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grupos de Investigación - Facultad de Ingeniería</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body { background: #D7ECF7; }
    .hero {
      background: linear-gradient(135deg, #0069d9, #1C4D66);
      color: white; padding: 3rem 1rem; text-align: center;
      border-radius: 0 0 1.5rem 1.5rem;
    }
    .card-custom { border-radius: 1rem; transition: transform .2s; }
    .card-custom:hover { transform: scale(1.03); }
    footer { background: #212529; color: white; padding: 1rem; margin-top: 2rem; }
  </style>
</head>
<body>

<header class="hero">
  <h1 class="fw-bold"><i class="bi bi-mortarboard-fill"></i> Grupos de Investigación</h1>
  <p class="lead">Facultad de Ingeniería - Universidad Santiago de Cali</p>
</header>

<main class="container mt-5">

  <!-- LISTA DE GRUPOS -->
  <section id="grupos" class="mb-5">
    <h2 class="mb-3"><i class="bi bi-diagram-3-fill"></i> Grupos disponibles</h2>
    <div class="row" id="grupos-list"></div>
    <div id="grupo-info" class="mt-4"></div>
  </section>

  <!-- REGISTRAR DOCENTE -->
  <section id="docente" class="mb-5">
    <h2 class="mb-3"><i class="bi bi-person-badge-fill"></i> Registrar docente investigador</h2>
    <form id="form-docente" class="card card-body shadow-sm">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Nombre completo</label>
          <input type="text" class="form-control" name="nombre" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Formación académica</label>
          <input type="text" class="form-control" name="formacion" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Horario de atención</label>
          <input type="text" class="form-control" name="horario" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Grupo asignado</label>
          <select class="form-select" name="grupo" required>
            <option value="">Seleccione...</option>
            <option value="COMBA I+D">COMBA I+D</option>
            <option value="GIEIAM">GIEIAM</option>
          </select>
        </div>
      </div>
      <button class="btn btn-primary mt-3" type="submit">Registrar</button>
    </form>
    <div id="docente-respuesta" class="alert mt-3 d-none"></div>
  </section>

  <!-- VINCULAR ESTUDIANTE -->
  <section id="estudiante" class="mb-5">
    <h2 class="mb-3"><i class="bi bi-people-fill"></i> Vincular estudiante a semillero</h2>
    <form id="form-estudiante" class="card card-body shadow-sm">
      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Nombre</label>
          <input type="text" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Código</label>
          <input type="text" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Carrera</label>
          <input type="text" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Grupo</label>
          <select id="grupo-estudiante" class="form-select" required>
            <option value="">Seleccione...</option>
            <option value="COMBA I+D">COMBA I+D</option>
            <option value="GIEIAM">GIEIAM</option>
          </select>
        </div>
        <div class="col-md-6">
          <label class="form-label">Semillero</label>
          <select id="semillero-estudiante" class="form-select" required>
            <option value="">Seleccione grupo primero</option>
          </select>
        </div>
      </div>
      <button class="btn btn-success mt-3" type="submit">Vincular</button>
    </form>
  </section>

  <!-- AGREGAR ACTIVIDAD -->
  <section id="actividad" class="mb-5">
    <h2 class="mb-3"><i class="bi bi-calendar-event-fill"></i> Registrar actividad en semillero</h2>
    <form id="form-actividad" class="card card-body shadow-sm">
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">Tipo de actividad</label>
          <select class="form-select" required>
            <option value="">Seleccione...</option>
            <option value="Taller">Taller</option>
            <option value="Conferencia">Conferencia</option>
            <option value="Evento">Evento</option>
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label">Fecha</label>
          <input type="date" class="form-control" required>
        </div>
        <div class="col-md-4">
          <label class="form-label">Hora</label>
          <input type="time" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Límite de asistentes</label>
          <input type="number" class="form-control" required>
        </div>
        <div class="col-md-6">
          <label class="form-label">Resumen</label>
          <textarea class="form-control" rows="2" required></textarea>
        </div>
      </div>
      <button class="btn btn-warning mt-3" type="submit">Agregar</button>
    </form>

    <h4 class="mt-4">Actividades registradas</h4>
    <ul id="lista-actividades" class="list-group"></ul>
  </section>
</main>

<footer class="text-center">
  <p>&copy; 2025 Facultad de Ingeniería - Universidad Santiago de Cali</p>
</footer>

<script>
  // Datos de grupos con semilleros (actualizados con la info real)
  const grupos = [
    {
      id: 1,
      nombre: "GIEIAM",
      director: "PhD. Diana Paola Bernal Suarez",
      objetivos: "Gestión y control de la contaminación ambiental. Instrumentación, automatización y sistemas inteligentes. Logística, operaciones, productividad y gestión de proyectos.",
      campo: "Grupo de Investigación en Ingeniería Electrónica Industrial y Ambiental.",
      semilleros: ["A", "B", "C"]
    },
    {
      id: 2,
      nombre: "COMBA I+D",
      director: "PhD. Diana Paola Bernal Suarez (Coordinadora CEII)",
      objetivos: "Arquitectura de tecnología informática. Computación ubicua, urbana y móvil. Desarrollo de sistemas informáticos. Redes inalámbricas para la inclusión digital y el desarrollo económico.",
      campo: "Grupo de Investigación en Computación Móvil y Banda Ancha.",
      semilleros: ["Comba", "Informa"]
    }
  ];

  // Renderizar grupos
  const lista = document.getElementById("grupos-list");
  grupos.forEach(grupo => {
    lista.innerHTML += `
      <div class="col-md-6">
        <div class="card card-custom shadow-sm p-3">
          <h5>${grupo.nombre}</h5>
          <button class="btn btn-outline-primary btn-sm mt-2" onclick="mostrarInfo(${grupo.id})">Ver información</button>
        </div>
      </div>`;
  });

  function mostrarInfo(id) {
    const grupo = grupos.find(g => g.id === id);
    document.getElementById("grupo-info").innerHTML = `
      <div class="card card-body shadow-sm mt-3">
        <h4>${grupo.nombre}</h4>
        <p><b>Director:</b> ${grupo.director}</p>
        <p><b>Objetivos:</b> ${grupo.objetivos}</p>
        <p><b>Campo de estudio:</b> ${grupo.campo}</p>
        <p><b>Semilleros:</b> ${grupo.semilleros.join(", ")}</p>
      </div>`;
  }

  // POST simulado con fetch
  document.getElementById("form-docente").addEventListener("submit", async e => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(e.target));
    const res = await fetch("https://jsonplaceholder.typicode.com/posts", {
      method: "POST",
      body: JSON.stringify(data),
      headers: {"Content-Type": "application/json"}
    });
    const result = await res.json();
    const msg = document.getElementById("docente-respuesta");
    msg.classList.remove("d-none", "alert-danger");
    msg.classList.add("alert-success");
    msg.textContent = "✅ Docente registrado con éxito (simulado). ID: " + result.id;
    e.target.reset();
  });

  // Actualizar semilleros según grupo en formulario estudiante
  const grupoSelect = document.getElementById("grupo-estudiante");
  const semilleroSelect = document.getElementById("semillero-estudiante");

  grupoSelect.addEventListener("change", () => {
    semilleroSelect.innerHTML = '<option value="">Seleccione...</option>';
    const grupo = grupos.find(g => g.nombre === grupoSelect.value);
    if (grupo) {
      grupo.semilleros.forEach(s => {
        const opt = document.createElement("option");
        opt.value = s;
        opt.textContent = s;
        semilleroSelect.appendChild(opt);
      });
    }
  });

  // Agregar actividades
  document.getElementById("form-actividad").addEventListener("submit", e => {
    e.preventDefault();
    const inputs = e.target.querySelectorAll("input, select, textarea");
    const values = Array.from(inputs).map(i => i.value);
    const li = document.createElement("li");
    li.classList.add("list-group-item");
    li.innerHTML = `<b>${values[0]}</b> - ${values[1]} ${values[2]} | Cupo: ${values[3]} <br> ${values[4]}`;
    document.getElementById("lista-actividades").appendChild(li);
    e.target.reset();
  });
</script>
</body>
</html>
